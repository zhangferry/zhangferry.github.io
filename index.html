<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.ico?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
<meta property="og:type" content="website">
<meta property="og:title" content="zhangferry">
<meta property="og:url" content="http://zhangferry.github.io/index.html">
<meta property="og:site_name" content="zhangferry">
<meta property="og:description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zhangferry">
<meta name="twitter:description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">



  <link rel="alternate" href="/atom.xml" title="zhangferry" type="application/atom+xml">




  <link rel="canonical" href="http://zhangferry.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>zhangferry</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?afe60f79e35ee3c65b92d9a2ff459653";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">zhangferry</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">11</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">31</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhangferry.github.io/2019/02/27/monthly_8/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhangferry">
      <meta itemprop="description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhangferry">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/27/monthly_8/" class="post-title-link" itemprop="url">iOS开发月报#8|201902</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-02-27 10:54:57" itemprop="dateCreated datePublished" datetime="2019-02-27T10:54:57+08:00">2019-02-27</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">3.1k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">3 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这里记录过去一个月，我看到的值得分享的内容，包含但不限于iOS知识，每个月的最后一天发布。<br>欢迎推荐内容，可以前往<a href="https://github.com/zhangferry/iOSMonthlyReport" target="_blank" rel="noopener">zhangferry/iOSMonthlyReport</a>提交issue。</p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><h3 id="presentedviewcontroller和presentingViewController"><a href="#presentedviewcontroller和presentingViewController" class="headerlink" title="presentedviewcontroller和presentingViewController"></a>presentedviewcontroller和presentingViewController</h3><p>假设从A控制器通过present的方式跳转到了B控制器，那么 <code>A.presentedViewController</code> 就是B控制器；<br><code>B.presentingViewController</code> 就是A控制器。如果没有对应关系会返回<code>nil</code></p>
<h3 id="获取类名"><a href="#获取类名" class="headerlink" title="获取类名"></a>获取类名</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//传入实例对象object</span></span><br><span class="line"><span class="keyword">let</span> typeName = <span class="type">String</span>(describing: type(of: object))</span><br></pre></td></tr></table></figure>
<h3 id="隐藏NavigationBar导致手势返回失效"><a href="#隐藏NavigationBar导致手势返回失效" class="headerlink" title="隐藏NavigationBar导致手势返回失效"></a>隐藏NavigationBar导致手势返回失效</h3><p>当我们从一个A(NavigationController)界面通过push进入B界面，如果要隐藏B的NavigationBar，那么从B到A的返回手势也会被屏蔽掉。<br>如果需要加回来我们可以这么做：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.给需要添加返回手势的ViewController增加UIGestureRecognizerDelegate</span></span><br><span class="line"><span class="comment">//2.由当前ViewController接管pop手势</span></span><br><span class="line"><span class="keyword">self</span>.navigationController?.interactivePopGestureRecognizer?.delegate = <span class="keyword">self</span></span><br></pre></td></tr></table></figure></p>
<h3 id="关于-Decimal"><a href="#关于-Decimal" class="headerlink" title="关于 Decimal"></a>关于 Decimal</h3><p>官方对<code>Decimal</code>介绍就一句话</p>
<blockquote>
<p>A structure representing a base-10 number.</p>
</blockquote>
<p>表示以10为基数的数的结构体，就是十进制的表示方法。<br>它可以通过 <code>mantissa * 10 ^ exponent</code>的形式表示任意数值。<code>mantissa</code>(尾数)是最长38位的整数，<code>exponent</code>(指数)是 -128到127的整数。</p>
<p>你也可以把Decimal理解成跟Int, Float, Double一样的数据类型，那有了整形，浮点型数值还会出现Decimal这个类型？<br>可以看一个例子：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">stride</span>: <span class="type">Float</span> = <span class="number">0.01</span></span><br><span class="line"><span class="keyword">var</span> sum: <span class="type">Float</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">1</span>...<span class="number">100</span> &#123;</span><br><span class="line">    sum += <span class="built_in">stride</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(sum)<span class="comment">//0.99999934</span></span><br></pre></td></tr></table></figure></p>
<p>sum的值不是1，这是因为精度的问题，那如果把Float换成Decimal就会完全等于1。</p>
<p><code>SKProduct</code>的<code>price</code>属性就是Decimal类型</p>
<h3 id="违反5-5条款被打回的经历"><a href="#违反5-5条款被打回的经历" class="headerlink" title="违反5.5条款被打回的经历"></a>违反5.5条款被打回的经历</h3><p>在一次有关内购项审核被打回的经历中，遇到了一个新问题，错误描述中提示违反了条款<code>5.5 Developer Code of Conduct</code>。<br>简单看下这一条</p>
<blockquote>
<p>Please treat everyone with respect, whether in your responses to App Store reviews, customer support requests, or when communicating with Apple, including your responses in Resolution Center. Do not engage in harassment of any kind, discriminatory practices, intimidation, bullying, and don’t encourage others to engage in any of the above.<br>Customer trust is the cornerstone of the App Store’s success. Apps should never prey on users or attempt to rip-off customers, trick them into making unwanted purchases, force them to share unnecessary data, raise prices in a tricky manner, charge for features or content that are not delivered, or engage in any other manipulative practices within or outside of the app.</p>
</blockquote>
<p>总结一下就是要尊重用户。</p>
<p>在联系过苹果审核客服之后，被告知是因为在引导过程中弹了两次订阅弹窗（一次订阅，一次freetrial）被拒的。但其实这个流程已经跑了大半年，一直没问题，这次却突然被揪出来了，有点莫名其妙。</p>
<p>可能审核人员认为，这种行为有诱导或者强迫用户付费的嫌疑。由此也可以看出审核人员对项目流程的管理越来越严格了。去掉一个步骤之后再次提交就过审了。</p>
<h2 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h2><h3 id="Swift-ABI-稳定对我们到底意味着什么"><a href="#Swift-ABI-稳定对我们到底意味着什么" class="headerlink" title="Swift ABI 稳定对我们到底意味着什么"></a><a href="https://onevcat.com/2019/02/swift-abi/" target="_blank" rel="noopener">Swift ABI 稳定对我们到底意味着什么</a></h3><p>Swift 社区最近最重大的新闻应该就是 ABI 稳定了。这个话题虽然已经讨论了有一阵子了，但随着 Xcode 10.2 beta 的迭代和 Swift 5 的 release 被提上日程，最终 Swift ABI 稳定能做到什么程度，我们开发者能做些什么，需要做些什么，就变成了一个重要的话题。</p>
<p>一起来看下使用 Swift 5 会对我们的项目有什么影响以及怎么处理。</p>
<h3 id="Void"><a href="#Void" class="headerlink" title="Void"></a><a href="https://juejin.im/post/5c73af896fb9a049cb1963d4" target="_blank" rel="noopener">Void</a></h3><p>SwiftGG翻译组翻译的Mattt一篇介绍Void的文章。<br><code>Void</code>是什么，它和<code>nil</code>有什么区别，这个我们经常用但不一定真的理解的东西，一起通过这篇文章看下吧。</p>
<h3 id="love2-io"><a href="#love2-io" class="headerlink" title="love2.io"></a><a href="https://love2.io/@tzivanmoe/doc/a-programmer-prepares/README.md" target="_blank" rel="noopener">love2.io</a></h3><p>程序员的自我修养，作为一个合格的程序员需要具备哪些知识呢？<br>数据结构、算法、代码架构、项目管理工具、网络知识等？这还不够，不能只有计算机相关的知识；我们还需要懂点设计、尝试当一个合格的PM、学会团队合作、学会学习、提升效率等等；但是不能只有工作，没有生活啊？你还需要了解保护个人隐私、创业流程、关注身体健康。。。<br>太多了，不列举了，这里都有。</p>
<h2 id="音视频"><a href="#音视频" class="headerlink" title="音视频"></a>音视频</h2><p><a href="https://www.gcores.com/radios/106545" target="_blank" rel="noopener">苏俄科幻简史：直指星海的冒险时代</a><br>假期最火的电影莫过于《流浪地球》了，接着这个科幻题材的电影同时也掀起了一股科幻风。</p>
<p>最近在机核（gamecores）上听到的一段讲述苏俄科幻简史的音频，可以当故事听，也可以当历史去听，非常有意思，推荐给大家。</p>
<h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><h3 id="DoraemonKit"><a href="#DoraemonKit" class="headerlink" title="DoraemonKit"></a><a href="https://github.com/didi/DoraemonKit" target="_blank" rel="noopener">DoraemonKit</a></h3><p>由滴滴团队开源，中文名“哆啦A梦”。</p>
<p>DoraemonKit 是一个功能集合面板，能够让每一个 App 快速接入一些常用的或者你没有实现的一些辅助开发工具、测试效率工具、视觉辅助工具，而且能够完美在 Doraemon 面板中接入你已经实现的与业务紧密耦合的一些非通有的辅助工具，功能强大，接入方便，便于扩展。</p>
<h3 id="resume-github-com"><a href="#resume-github-com" class="headerlink" title="resume.github.com"></a><a href="https://github.com/resume/resume.github.com" target="_blank" rel="noopener">resume.github.com</a></h3><p>这个库可以通过你仓库的活跃事件来生成一份在线简历。使用很简单，直接访问以下网址：<a href="https://resume.github.io/?yourusername" target="_blank" rel="noopener">https://resume.github.io/?yourusername</a></p>
<p>需要将<code>yourusername</code>替换成你的用户名，别忘了那个<code>?</code></p>
<h3 id="iOS-Developer-Roadmap"><a href="#iOS-Developer-Roadmap" class="headerlink" title="iOS-Developer-Roadmap"></a><a href="https://github.com/BohdanOrlov/iOS-Developer-Roadmap" target="_blank" rel="noopener">iOS-Developer-Roadmap</a></h3><p>“金三银四”是招聘的旺季，很多人会有换工作的需求，最近很多社区也都在推这一类的文章。但作为开发人员来说本身技能是否过硬才是最重要的，作为一名iOS开发应该具备哪些技能呢？</p>
<p>我们可以参照这个库总结的roadmap来检查自己缺失哪些知识，以及当前处于哪个阶段，然后去努力点亮整个iOS技能树。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhangferry.github.io/2019/02/27/digest_introduction/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhangferry">
      <meta itemprop="description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhangferry">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/27/digest_introduction/" class="post-title-link" itemprop="url">关于消息摘要及对应的Swift实现</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-02-27 10:54:57" itemprop="dateCreated datePublished" datetime="2019-02-27T10:54:57+08:00">2019-02-27</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">5.7k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">5 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://raw.githubusercontent.com/zhangferry/Images/master/blog/20190227163346.jpg" alt=""><br>开发过程中我们经常会遇到对数据进行一些类似<code>MD5</code>，<code>SHA-256</code>等的处理，那处理的作用是什么以及为什么要这么做，就是今天要讨论的内容。如果你对这些算法的概念已经很熟悉，那就不用继续往下看了，如果你感觉生疏，或者并不能说清楚他们的作用，那就跟着我一起回顾一下吧。</p>
<h2 id="从MD5说起"><a href="#从MD5说起" class="headerlink" title="从MD5说起"></a>从MD5说起</h2><p>我门从最常见的<a href="https://zh.wikipedia.org/wiki/MD5" target="_blank" rel="noopener">MD5</a>说起。下面是维基百科对MD5的定义：</p>
<blockquote>
<p>MD5消息摘要算法（英语：MD5 Message-Digest Algorithm），一种被广泛使用的密码散列函数，可以产生出一个128位（16字节）的散列值（hash value），用于确保信息传输完整一致。</p>
</blockquote>
<p>MD5的概念中出现了两个名词：<strong>信息摘要算法</strong> + <strong>密码散列函数</strong>。<br>我们再分别来看这两个概念的含义。</p>
<h3 id="信息摘要算法"><a href="#信息摘要算法" class="headerlink" title="信息摘要算法"></a>信息摘要算法</h3><p><a href="https://baike.baidu.com/item/%E6%B6%88%E6%81%AF%E6%91%98%E8%A6%81%E7%AE%97%E6%B3%95/3286770?fromtitle=%E6%91%98%E8%A6%81%E7%AE%97%E6%B3%95&amp;fromid=12011257" target="_blank" rel="noopener">消息摘要算法</a>消息摘要是把任意长度的输入揉和而产生长度固定的伪随机输入的算法。</p>
<p>它具有以下特点：</p>
<ul>
<li><p>无论输入的消息有多长，计算出来的消息摘要的长度总是固定的。例如应用MD5算法摘要的消息有128个比特位，一般认为，摘要的最终输出越长，该摘要算法就越安全。变长输入，定长输出。</p>
</li>
<li><p>一般地，只要输入的消息不同，对其进行摘要以后产生的摘要消息也必不相同；但相同的输入必会产生相同的输出。</p>
</li>
<li><p>消息摘要函数是单向函数，即只能进行正向的信息摘要，而无法从摘要中恢复出任何的消息，甚至根本就找不到任何与原信息相关的信息。</p>
</li>
<li><p>好的摘要算法，没有人能从中找到“碰撞”，即无法找到两条不同的消息，使它们的摘要相同。</p>
</li>
</ul>
<p>从理论上来说，不管使用什么样的摘要算法，必然存在2个不同的消息，对应同样的摘要。因为输入是一个无穷集合，而输出是一个有限集合。但是实际上，很难或者说根本不可能人为的造出具有同样摘要的2个不同消息。</p>
<h3 id="密码散列函数："><a href="#密码散列函数：" class="headerlink" title="密码散列函数："></a>密码散列函数：</h3><p><a href="https://zh.wikipedia.org/wiki/%E5%AF%86%E7%A2%BC%E9%9B%9C%E6%B9%8A%E5%87%BD%E6%95%B8" target="_blank" rel="noopener">密码散列函数（Cryptographic hash function）</a>，又译为加密散列函数，是散列函数的一种。它被认为是一种单向函数，也就是说极其难以由散列函数输出的结果，回推输入的数据是什么。</p>
<h3 id="概念梳理"><a href="#概念梳理" class="headerlink" title="概念梳理"></a>概念梳理</h3><p>这里比较重要的就是理解信息摘要，它概念就是把一段数据压缩成固定长度的数据，但是我们不能通过压缩后的数据反推原始数据。</p>
<p>有一种应用场景比较能说明问题：<br>我们在登录的时候，对用户密码进行MD5计算之后再传到服务器，之后数据库显示的用户信息就是MD5之后的16字节字符串。管理员即使能访问用户数据库但他并不能由MD5处理之后的数据得知原始密码。<br>而客户端这边却可以在输入密码之后，进行MD5计算然后与服务器密码进行比较。</p>
<h2 id="SHA家族"><a href="#SHA家族" class="headerlink" title="SHA家族"></a>SHA家族</h2><p><a href="https://zh.wikipedia.org/wiki/SHA%E5%AE%B6%E6%97%8F" target="_blank" rel="noopener">安全散列算法</a>（英语：Secure Hash Algorithm，缩写为SHA）是一个密码散列函数家族，是FIPS所认证的安全散列算法。能计算出一个数字消息所对应到的，长度固定的字符串（又称消息摘要）的算法。</p>
<p>SHA的出现就是解决MD5不安全的问题，它是一种比MD5更安全的密码散列函数。</p>
<p>SHA家族的算法，由美国国家安全局（NSA）所设计，并由美国国家标准与技术研究院（NIST）发布，是美国的政府标准，其分别是：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>简介</th>
<th>应用范围</th>
<th>发布时间</th>
</tr>
</thead>
<tbody>
<tr>
<td>SHA-0</td>
<td>SHA-1前身</td>
<td>-</td>
<td>1993</td>
</tr>
<tr>
<td>SHA-1</td>
<td>曾被视为MD5的后继者，但SHA-1的安全性在2000年以后已经不被大多数的加密场景所接受。</td>
<td>广泛</td>
<td>1995</td>
</tr>
<tr>
<td>SHA-2</td>
<td>包括SHA-224/SHA-256/SHA-384/SHA-512，目前并未被破解</td>
<td>广泛</td>
<td>2001</td>
</tr>
<tr>
<td>SHA-3</td>
<td>比SHA-2更安全的散列函数，并无替代SHA-2的计划</td>
<td>较小</td>
<td>2015</td>
</tr>
</tbody>
</table>
<h2 id="散列函数的安全性"><a href="#散列函数的安全性" class="headerlink" title="散列函数的安全性"></a>散列函数的安全性</h2><p>上面说到了MD5是不安全的，不安全意味着可以找到MD5的“碰撞”，就是两个文件可以产生相同的“指纹”。这意味着，当你在网络上使用电子签名签署一份合同后，还可能找到另外一份具有相同签名但内容迥异的合同，这样两份合同的真伪性便无从辨别。</p>
<p>2004年8月17日，在CRYPTO 2004的Rump会议上，王小云，冯登国、来学嘉，和于红波宣布了攻击MD5、SHA-0 和其他杂凑函数的初步结果。他们攻击SHA-0的计算复杂度是2的40次方，这意味着他们的攻击成果比Joux还有其他人所做的更好。</p>
<p>2005年二月，王小云和殷益群、于红波再度发表了对SHA-0破密的算法，可在2的39次方的计算复杂度内就找到碰撞。</p>
<p>2009年，中国科学院的谢涛和冯登国仅用了2的20.96次方的碰撞算法复杂度，破解了MD5的碰撞抵抗，该攻击在普通计算机上运行只需要数秒钟。</p>
<p>2017年荷兰密码学研究小组CWI和Google正式宣布攻破了SHA-1。</p>
<h2 id="摘要的Swift实现"><a href="#摘要的Swift实现" class="headerlink" title="摘要的Swift实现"></a>摘要的Swift实现</h2><p>Swift有一个比较成熟的专门处理摘要，加密等安全相关的框架<a href="https://github.com/krzyzanowskim/CryptoSwift" target="_blank" rel="noopener">CryptoSwift</a>。</p>
<p>以下是Swift对摘要算法的原生实现，需要引入<code>CommonCrypto</code>框架，这个已经内置到Xcode里面了，列出了对String和Data的摘要扩展。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"><span class="keyword">import</span> CommonCrypto</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CryptoAlgorithm</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">MD5</span>, <span class="type">SHA1</span>, <span class="type">SHA224</span>, <span class="type">SHA256</span>, <span class="type">SHA384</span>, <span class="type">SHA512</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> digestLength: <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> result: <span class="type">Int32</span> = <span class="number">0</span></span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">MD5</span>:      result = <span class="type">CC_MD5_DIGEST_LENGTH</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">SHA1</span>:     result = <span class="type">CC_SHA1_DIGEST_LENGTH</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">SHA224</span>:   result = <span class="type">CC_SHA224_DIGEST_LENGTH</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">SHA256</span>:   result = <span class="type">CC_SHA256_DIGEST_LENGTH</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">SHA384</span>:   result = <span class="type">CC_SHA384_DIGEST_LENGTH</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">SHA512</span>:   result = <span class="type">CC_SHA512_DIGEST_LENGTH</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Int</span>(result)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> md5:    <span class="type">String</span> &#123; <span class="keyword">return</span> digest(string: <span class="keyword">self</span>, algorithm: .<span class="type">MD5</span>) &#125;</span><br><span class="line">    <span class="keyword">var</span> sha1:   <span class="type">String</span> &#123; <span class="keyword">return</span> digest(string: <span class="keyword">self</span>, algorithm: .<span class="type">SHA1</span>) &#125;</span><br><span class="line">    <span class="keyword">var</span> sha224: <span class="type">String</span> &#123; <span class="keyword">return</span> digest(string: <span class="keyword">self</span>, algorithm: .<span class="type">SHA224</span>) &#125;</span><br><span class="line">    <span class="keyword">var</span> sha256: <span class="type">String</span> &#123; <span class="keyword">return</span> digest(string: <span class="keyword">self</span>, algorithm: .<span class="type">SHA256</span>) &#125;</span><br><span class="line">    <span class="keyword">var</span> sha384: <span class="type">String</span> &#123; <span class="keyword">return</span> digest(string: <span class="keyword">self</span>, algorithm: .<span class="type">SHA384</span>) &#125;</span><br><span class="line">    <span class="keyword">var</span> sha512: <span class="type">String</span> &#123; <span class="keyword">return</span> digest(string: <span class="keyword">self</span>, algorithm: .<span class="type">SHA512</span>) &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">digest</span><span class="params">(string: String, algorithm: CryptoAlgorithm)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> result: [<span class="type">CUnsignedChar</span>]</span><br><span class="line">        <span class="keyword">let</span> digestLength = <span class="type">Int</span>(algorithm.digestLength)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> cdata = string.cString(using: <span class="type">String</span>.<span class="type">Encoding</span>.utf8) &#123;</span><br><span class="line">            result = <span class="type">Array</span>(repeating: <span class="number">0</span>, <span class="built_in">count</span>: digestLength)</span><br><span class="line">            <span class="keyword">switch</span> algorithm &#123;</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">MD5</span>:      <span class="type">CC_MD5</span>(cdata, <span class="type">CC_LONG</span>(cdata.<span class="built_in">count</span>-<span class="number">1</span>), &amp;result)</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">SHA1</span>:     <span class="type">CC_SHA1</span>(cdata, <span class="type">CC_LONG</span>(cdata.<span class="built_in">count</span>-<span class="number">1</span>), &amp;result)</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">SHA224</span>:   <span class="type">CC_SHA224</span>(cdata, <span class="type">CC_LONG</span>(cdata.<span class="built_in">count</span>-<span class="number">1</span>), &amp;result)</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">SHA256</span>:   <span class="type">CC_SHA256</span>(cdata, <span class="type">CC_LONG</span>(cdata.<span class="built_in">count</span>-<span class="number">1</span>), &amp;result)</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">SHA384</span>:   <span class="type">CC_SHA384</span>(cdata, <span class="type">CC_LONG</span>(cdata.<span class="built_in">count</span>-<span class="number">1</span>), &amp;result)</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">SHA512</span>:   <span class="type">CC_SHA512</span>(cdata, <span class="type">CC_LONG</span>(cdata.<span class="built_in">count</span>-<span class="number">1</span>), &amp;result)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">fatalError</span>(<span class="string">"Nil returned when processing input strings as UTF8"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="number">0</span>..&lt;digestLength).<span class="built_in">reduce</span>(<span class="string">""</span>) &#123; $<span class="number">0</span> + <span class="type">String</span>(format: <span class="string">"%02hhx"</span>, result[$<span class="number">1</span>])&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Data</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> md5:    <span class="type">String</span> &#123; <span class="keyword">return</span> digest(data: <span class="keyword">self</span>, algorithm: .<span class="type">MD5</span>) &#125;</span><br><span class="line">    <span class="keyword">var</span> sha1:   <span class="type">String</span> &#123; <span class="keyword">return</span> digest(data: <span class="keyword">self</span>, algorithm: .<span class="type">SHA1</span>) &#125;</span><br><span class="line">    <span class="keyword">var</span> sha224: <span class="type">String</span> &#123; <span class="keyword">return</span> digest(data: <span class="keyword">self</span>, algorithm: .<span class="type">SHA224</span>) &#125;</span><br><span class="line">    <span class="keyword">var</span> sha256: <span class="type">String</span> &#123; <span class="keyword">return</span> digest(data: <span class="keyword">self</span>, algorithm: .<span class="type">SHA256</span>) &#125;</span><br><span class="line">    <span class="keyword">var</span> sha384: <span class="type">String</span> &#123; <span class="keyword">return</span> digest(data: <span class="keyword">self</span>, algorithm: .<span class="type">SHA384</span>) &#125;</span><br><span class="line">    <span class="keyword">var</span> sha512: <span class="type">String</span> &#123; <span class="keyword">return</span> digest(data: <span class="keyword">self</span>, algorithm: .<span class="type">SHA512</span>) &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">digest</span><span class="params">(data: Data, algorithm: CryptoAlgorithm)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> result: [<span class="type">CUnsignedChar</span>]</span><br><span class="line">        <span class="keyword">let</span> digestLength = <span class="type">Int</span>(algorithm.digestLength)</span><br><span class="line">        <span class="keyword">let</span> pdata = (data <span class="keyword">as</span> <span class="type">NSData</span>).bytes</span><br><span class="line">        result = <span class="type">Array</span>(repeating: <span class="number">0</span>, <span class="built_in">count</span>: digestLength)</span><br><span class="line">        <span class="keyword">switch</span> algorithm &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">MD5</span>:      <span class="type">CC_MD5</span>(pdata, <span class="type">CC_LONG</span>(data.<span class="built_in">count</span>), &amp;result)</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">SHA1</span>:     <span class="type">CC_SHA1</span>(pdata, <span class="type">CC_LONG</span>(data.<span class="built_in">count</span>), &amp;result)</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">SHA224</span>:   <span class="type">CC_SHA224</span>(pdata, <span class="type">CC_LONG</span>(data.<span class="built_in">count</span>), &amp;result)</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">SHA256</span>:   <span class="type">CC_SHA256</span>(pdata, <span class="type">CC_LONG</span>(data.<span class="built_in">count</span>), &amp;result)</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">SHA384</span>:   <span class="type">CC_SHA384</span>(pdata, <span class="type">CC_LONG</span>(data.<span class="built_in">count</span>), &amp;result)</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">SHA512</span>:   <span class="type">CC_SHA512</span>(pdata, <span class="type">CC_LONG</span>(data.<span class="built_in">count</span>), &amp;result)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> (<span class="number">0</span>..&lt;digestLength).<span class="built_in">reduce</span>(<span class="string">""</span>) &#123; $<span class="number">0</span> + <span class="type">String</span>(format: <span class="string">"%02hhx"</span>, result[$<span class="number">1</span>])&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhangferry.github.io/2019/02/20/figure_bed_github/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhangferry">
      <meta itemprop="description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhangferry">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/20/figure_bed_github/" class="post-title-link" itemprop="url">艰难的图床优化方案(MWeb+PicGo+Github)</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-02-20 10:54:57" itemprop="dateCreated datePublished" datetime="2019-02-20T10:54:57+08:00">2019-02-20</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.4k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="博客写作优化"><a href="#博客写作优化" class="headerlink" title="博客写作优化"></a>博客写作优化</h2><p>写博客就肯定会遇到插入图片的情况，我之前的做法是先在<a href="https://boostnote.io/" target="_blank" rel="noopener">Boostnote</a>这种Markdown编辑器里面写个草稿，如果有图片就附上图片，然后再粘到简书的web端。当然图片也需要另拖，会生成一个简书的图片链接，相当于把简书作为图床，然后我再把简书排好版的文章发布到自己的博客。。。</p>
<p>当然是很麻烦的方式，这种写法持续了大半年之后，开始寻找更高效的写博客的方式。首先客户端，最终选了MWeb。然后是要解决麻烦的图床问题，因为MWeb内嵌了七牛云图传服务，所以申请了七牛云账号，用了一段时间感觉真是如丝般顺滑。</p>
<h2 id="图床历险记"><a href="#图床历险记" class="headerlink" title="图床历险记"></a>图床历险记</h2><p>直到我收到了这个：<br><img src="https://raw.githubusercontent.com/zhangferry/Images/master/blog/15504845205127.jpg" alt=""></p>
<p>在七牛云上申请的只是测试域名服务，只有一个月的有效期。如果想继续使用就需要绑定自己的域名，而且这个域名还需要备案。</p>
<p>于是我在腾讯云上注册了两年的<a href="http://www.zhangferry.com" target="_blank" rel="noopener">zhangferry.com</a>这个域名。填写资料时，我看到系统提示域名要进行备案，备案过程中又发现，要有绑定腾讯云服务才能进行备案。？？我只是要域名并不需要云服务啊。隐约感觉好像被下套了，需要解决的问题一个套一个。我还怀着侥幸的心理看了下腾讯云服务的价格，用不起用不起。。。<br>看到提示说如果不备案域名，三个月后会被回收，有点慌。询问客服之后得知，服务器在国内且没有备案的情况下才会被回收，因为我的博客是搭在Github上的，所以可以不备案，松了一口气，域名保住了。但是，不备案七牛云又不干了，what f。。。</p>
<p>纠结一段时间之后我只能放弃七牛云，寻找其他的图床服务，知乎上有一个总结比较全的文章<a href="https://zhuanlan.zhihu.com/p/35270383" target="_blank" rel="noopener">盘点一下免费好用的图床</a>。原来是有很多免费服务的，感觉找到了解决方案。但是，又是一个但是，图床这个东西，免费就意味着不稳定，万一哪天挂了，图片就都丢了。最后文末有总结：<strong>如果打算长期稳定使用请优先选择又拍云或者七牛云，如果是存储并不重要的图片可以使用免费不限大小的SM.MS图床</strong>。</p>
<p>再结合我对图床的需求：免费+稳定。<a href="https://sm.ms/" target="_blank" rel="noopener">SM.MS</a>好像是最接近的方案了，虽然SM.MS知名度不算低，但是我还是有点担心它的稳定性。</p>
<p>再继续找，找到了这个<a href="https://github.com/Molunerfinn/PicGo" target="_blank" rel="noopener">PicGo</a>，一个图床管理工具，顺着PicGo（v2.0.3）我找到了Github作为图床这一方案。Github，对啊，我直接就确认了这种方案。虽然有人说Github图片国内访问会慢一些，但是它肯定能保证数据的稳定性啊。这样图床工具和图床服务都找好了，喜大普奔！</p>
<h2 id="Github图床配置"><a href="#Github图床配置" class="headerlink" title="Github图床配置"></a>Github图床配置</h2><p>说了很多废话，终于到了这个理想图床的配置阶段了，比较简单。</p>
<h3 id="1、建一个仓库"><a href="#1、建一个仓库" class="headerlink" title="1、建一个仓库"></a>1、建一个仓库</h3><p>用于存需要上传的图片。这个仓库最好是public的，因为private的仓库，图片链接会带token，这个token又存在过期的问题。</p>
<h3 id="2、获取授权token"><a href="#2、获取授权token" class="headerlink" title="2、获取授权token"></a>2、获取授权token</h3><p>在Github的<a href="https://github.com/settings/tokens" target="_blank" rel="noopener">Developer setting</a>界面生一个token。记得保存，因为它只会显示一次。<br><img src="https://raw.githubusercontent.com/zhangferry/Images/master/blog/02060BA7-54CC-448B-ABFE-ADFE6E72FF1B.png" alt=""></p>
<h3 id="3、配置PicGo"><a href="#3、配置PicGo" class="headerlink" title="3、配置PicGo"></a>3、配置PicGo</h3><p>根据图示：<br><img src="https://raw.githubusercontent.com/zhangferry/Images/master/blog/15504954147366.jpg" alt=""></p>
<h3 id="4、使用"><a href="#4、使用" class="headerlink" title="4、使用"></a>4、使用</h3><p>使用也很方便，PicGo有两种方式：<br><strong>屏幕截图</strong><br>截取图片之后，图片会出现在PicGo的待上传列表里面。我们手动点一下会触发上传，上传成功之后，剪贴板会有对应markdown格式的图片文本，直接粘贴可以使用。<br><strong>固定图片</strong><br>我们需要将需要使用的图片拖到PicGo的客户端内手动上传，上传成功之后，会自动复制成markdown文本，可以直接粘贴使用。</p>
<p>终于搞定了，撒花！</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhangferry.github.io/2019/01/31/monthly_7/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhangferry">
      <meta itemprop="description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhangferry">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/31/monthly_7/" class="post-title-link" itemprop="url">iOS开发月报#7|201901</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-01-31 10:54:57" itemprop="dateCreated datePublished" datetime="2019-01-31T10:54:57+08:00">2019-01-31</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">5k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">5 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这里记录过去一个月，我看到的值得分享的内容，包含但不限于iOS知识，每个月的最后一天发布。<br>欢迎推荐内容，可以前往<a href="https://github.com/zhangferry/iOSMonthlyReport" target="_blank" rel="noopener">zhangferry/iOSMonthlyReport</a>提交issue。</p>
<p>另外，马上就要过年了，提前祝大家春节快乐！<br><img src="https://raw.githubusercontent.com/zhangferry/Images/master/blog/freestocks-org-506237-unsplash.jpg" alt=""></p>
<h2 id="新闻一览"><a href="#新闻一览" class="headerlink" title="新闻一览"></a>新闻一览</h2><h3 id="Github宣布私有库免费"><a href="#Github宣布私有库免费" class="headerlink" title="Github宣布私有库免费"></a><a href="https://github.blog/2019-01-07-new-year-new-github/" target="_blank" rel="noopener">Github宣布私有库免费</a></h3><p>Github宣布提供免费且不限量的私有仓库服务，如果协作者超过3个仍需购买付费服务。<br>喜大普奔啊，得知消息之后，我赶紧就建立一个私有仓库，放一些不想让你们看到的东西🙃</p>
<h3 id="Swift-5-Release-Notes-for-Xcode-10-2-beta"><a href="#Swift-5-Release-Notes-for-Xcode-10-2-beta" class="headerlink" title="Swift 5 Release Notes for Xcode 10.2 beta"></a><a href="https://developer.apple.com/documentation/xcode_release_notes/xcode_10_2_beta_release_notes/swift_5_release_notes_for_xcode_10_2_beta?language=objc" target="_blank" rel="noopener">Swift 5 Release Notes for Xcode 10.2 beta</a></h3><p>Swift5 版本终于发布了，最低可以使用Xcode10.2beta 查看。Swift5 带来了ABI稳定，届时系统将自带Swift动态库，由Swift编译的项目将不会自动把运行库打到包里。</p>
<p>Swift5 具体还有哪些特性，可以参考知识小集团队的<a href="https://juejin.im/post/5c4b3e91e51d452c8e6d6bcc" target="_blank" rel="noopener">翻译版本</a></p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><h3 id="Dictionary的merge操作"><a href="#Dictionary的merge操作" class="headerlink" title="Dictionary的merge操作"></a>Dictionary的merge操作</h3><p><code>Dictionary</code>的merge可能平常用的不多，我是在一次bug排查的过程中，发现自己对merge操作理解也有些偏差。这里做个简单梳理。<br>看其中一种情况：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dictionary = [<span class="string">"a"</span>: <span class="number">1</span>, <span class="string">"b"</span>: <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// Keeping existing value for key "a":</span></span><br><span class="line">dictionary.merge([<span class="string">"a"</span>: <span class="number">3</span>, <span class="string">"c"</span>: <span class="number">4</span>]) &#123; (current, <span class="number">_</span>) <span class="keyword">in</span> current &#125;</span><br><span class="line"><span class="comment">// ["b": 2, "a": 1, "c": 4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Taking the new value for key "a":</span></span><br><span class="line">dictionary.merge([<span class="string">"a"</span>: <span class="number">5</span>, <span class="string">"d"</span>: <span class="number">6</span>]) &#123; (<span class="number">_</span>, new) <span class="keyword">in</span> new &#125;</span><br><span class="line"><span class="comment">// ["b": 2, "a": 5, "c": 4, "d": 6]</span></span><br></pre></td></tr></table></figure></p>
<p>注意尾随闭包中有两个参数，返回第一个参数，表示如果merge操作有重复key值，将保留merge前的value不变。如果闭包返回第二个参数，如果merge有重复key，将更新至最新值。<br><code>Dictionary</code>向关的merge函数一共有四个，使用类似：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">merge</span>&lt;S&gt;<span class="params">(<span class="number">_</span> other: S, uniquingKeysWith combine: <span class="params">([Key : Value].Value, [Key : Value].Value)</span></span></span> <span class="keyword">throws</span> -&gt; [<span class="type">Key</span> : <span class="type">Value</span>].<span class="type">Value</span>) <span class="keyword">rethrows</span> <span class="keyword">where</span> <span class="type">S</span> : <span class="type">Sequence</span>, <span class="type">S</span>.<span class="type">Element</span> == (<span class="type">Key</span>, <span class="type">Value</span>)</span><br><span class="line"><span class="comment">//上面示例对应方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">merge</span><span class="params">(<span class="number">_</span> other: [[Key : Value].Key : [Key : Value].Value], uniquingKeysWith combine: <span class="params">([Key : Value].Value, [Key : Value].Value)</span></span></span> <span class="keyword">throws</span> -&gt; [<span class="type">Key</span> : <span class="type">Value</span>].<span class="type">Value</span>) <span class="keyword">rethrows</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">merging</span>&lt;S&gt;<span class="params">(<span class="number">_</span> other: S, uniquingKeysWith combine: <span class="params">([Key : Value].Value, [Key : Value].Value)</span></span></span> <span class="keyword">throws</span> -&gt; [<span class="type">Key</span> : <span class="type">Value</span>].<span class="type">Value</span>) <span class="keyword">rethrows</span> -&gt; [[<span class="type">Key</span> : <span class="type">Value</span>].<span class="type">Key</span> : [<span class="type">Key</span> : <span class="type">Value</span>].<span class="type">Value</span>] <span class="keyword">where</span> <span class="type">S</span> : <span class="type">Sequence</span>, <span class="type">S</span>.<span class="type">Element</span> == (<span class="type">Key</span>, <span class="type">Value</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">merging</span><span class="params">(<span class="number">_</span> other: [[Key : Value].Key : [Key : Value].Value], uniquingKeysWith combine: <span class="params">([Key : Value].Value, [Key : Value].Value)</span></span></span> <span class="keyword">throws</span> -&gt; [<span class="type">Key</span> : <span class="type">Value</span>].<span class="type">Value</span>) <span class="keyword">rethrows</span> -&gt; [[<span class="type">Key</span> : <span class="type">Value</span>].<span class="type">Key</span> : [<span class="type">Key</span> : <span class="type">Value</span>].<span class="type">Value</span>]</span><br></pre></td></tr></table></figure></p>
<h3 id="一些Git操作"><a href="#一些Git操作" class="headerlink" title="一些Git操作"></a>一些Git操作</h3><p><strong>删除子目录git</strong><br>当一个含git的目录包含了其他含git目录时，外部git是不能将内部git纳入版本管理的。有一种解决方案是，移除内部的git仓库。<br>1、删除内部git<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd 需要移除的git目录</span><br><span class="line">rm -rf .git  # 或者显示隐藏目录手动删除.git文件夹</span><br></pre></td></tr></table></figure></p>
<p>此时虽然已经删除了<code>.git</code>但是原目录还存在缓存，无法添加到外部git中。<br>2、删除缓存内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached next</span><br></pre></td></tr></table></figure></p>
<p><strong>git pull强制覆盖本地文件</strong><br>当我们需要将某一分支，跟远程对应分支保持一致时，可以做如下操作：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git fetch</span><br><span class="line">git reset --hard origin/branch_name</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure></p>
<p><strong>fatal:refusing to merge unrelated histories</strong><br>当我们为一个项目关联了一个远程仓库，执行pull的操作时出现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line"> * [new branch]      master     -&gt; origin/master</span><br><span class="line">fatal: refusing to merge unrelated histories</span><br></pre></td></tr></table></figure></p>
<p>这是因为git从2.9.0版本开始，预设行为不允许合并没有共同祖先的分支。如果你非要合并，需要加上<code>--allow-unrelated-histories</code>参数才行：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master --allow-unrelated-histories</span><br></pre></td></tr></table></figure></p>
<h3 id="几个提高效率的快捷键"><a href="#几个提高效率的快捷键" class="headerlink" title="几个提高效率的快捷键"></a>几个提高效率的快捷键</h3><p>最近在熟练使用了几个快捷键后，明显感觉开发效率提高了不少，这里总结了几个常用但不是非常常用的快捷键（Command + C 和 Command V等）。另外</p>
<ul>
<li>Command（或 Cmd）⌘</li>
<li>Shift ⇧</li>
<li>Option（或 Alt）⌥</li>
<li>Control（或 Ctrl）⌃</li>
<li>Power 电源键</li>
</ul>
<p><strong>Xcode</strong><br>Command + Shift + J 文件目录指向当前文件<br>Command + Shift + O 文件、对象搜索<br>Command + Shift + F 全局搜索<br>Command + shift + , 编辑 scheme<br>Command + Control + Left/Right 浏览历史切换<br>Command + Option + Left/Right 折叠、展开当前代码段<br>Command + Option + C 显示Commit界面<br><strong>系统操作</strong><br>Command + Option + Power 睡眠状态<br>Power 1.5s睡眠状态<br>Command + Control + Power 强制Mac重启</p>
<p><strong>适用其他程序</strong><br>Command + , 打开偏好设置<br>Command + W 关闭最前面的窗口<br>Command + Option + W 关闭应用所有窗口<br>Command + Q 推出应用<br>Command + M 最小化<br>Command + Shift + [/] 左右切换应用tab</p>
<h2 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h2><h3 id="未来世界的幸存者"><a href="#未来世界的幸存者" class="headerlink" title="未来世界的幸存者"></a><a href="http://survivor.ruanyifeng.com/index.html" target="_blank" rel="noopener">未来世界的幸存者</a></h3><p>今年市场经济不景气，很多互联网公司经历“裁员潮”，其实不光是换联网行业，其他行业也面临同样的问题。那怎么提高自己的核心竞争力，是每一个从事互联网行业的人都应该考虑的。我们不应该只满足于日常开发，要找准自己的定位，提早做职业规划。另外不断尝试拓展自己的知识面，增加自己的影响力，这样才能让自己在不断变化的市场中立于不败之地。</p>
<p>除了阮老师的这本书，还推荐<br>卓同学的<a href="https://juejin.im/post/5c45c999e51d4551cd71f4e2" target="_blank" rel="noopener">iOS 2019 隆中对</a></p>
<h3 id="什么是真正的程序员"><a href="#什么是真正的程序员" class="headerlink" title="什么是真正的程序员"></a><a href="https://www.cnblogs.com/xueweihan/p/5220513.html" target="_blank" rel="noopener">什么是真正的程序员</a></h3><p>作者仿照《小王子》中的情节，通过小printf遇见的不同类型的程序员，最后悟出什么才是真正的程序员！<br>有两个概念比较有意思：</p>
<ul>
<li>达克效应：能力强的人总是低估自己，能力弱的人总是高估自己。</li>
<li>能够为人们解决真正需要解决的问题的程序员，才是真正的程序员</li>
</ul>
<h3 id="Language-Server-Protocol"><a href="#Language-Server-Protocol" class="headerlink" title="Language Server Protocol"></a><a href="https://swift.gg/2019/01/15/nshipster-language-server-protocol/" target="_blank" rel="noopener">Language Server Protocol</a></h3><p>来自SwiftGG翻译组的一篇文章。<br>苹果公司 在 <a href="https://forums.swift.org/t/new-lsp-language-service-supporting-swift-and-c-family-languages-for-any-editor-and-platform/17024" target="_blank" rel="noopener">Swift.org</a> 论坛上宣布，正在着手为 Swift 和 C 语言支持 <a href="https://microsoft.github.io/language-server-protocol/" target="_blank" rel="noopener">Language Server Protocol</a>（语言服务器协议，LSP）。<br>那这意味着什么呢？这可能是苹果自 2014 年将 Swift 作为开源软件发布以来，为 Swift 做出的最重要的决定。它意味着我们可以不必使用Xcode去开发Swift项目，而是可以选择像是Visual Studio, Atom这些IDE。Swift将变成一种更加通用的变成语言。</p>
<h3 id="Hashable-Hasher"><a href="#Hashable-Hasher" class="headerlink" title="Hashable / Hasher"></a><a href="https://nshipster.cn/hashable/" target="_blank" rel="noopener">Hashable / Hasher</a></h3><p>Hash是程序开发过程中很重要的一个概念，它可以让我们查找集合特定元素的时间复杂度由O(n)降低到O(1)。<br>这篇文章介绍了Swift中关于哈希的实现，哈希冲突的改变，以及Swift4.1之后关于自动化实现<code>Equatable</code>的相关介绍。</p>
<h3 id="Table-View-太複雜？利用-MVVM-和-Protocol-就可以為它重構瘦身！"><a href="#Table-View-太複雜？利用-MVVM-和-Protocol-就可以為它重構瘦身！" class="headerlink" title="Table View 太複雜？利用 MVVM 和 Protocol 就可以為它重構瘦身！"></a><a href="https://www.appcoda.com.tw/tableview-mvvm/" target="_blank" rel="noopener">Table View 太複雜？利用 MVVM 和 Protocol 就可以為它重構瘦身！</a></h3><p>TableView是我们常用的系统部件，随着业务逻辑的不断迭代它内部的逻辑可能会越来越复杂，代码量也越来越多，如果不能很好的组织逻辑架构，这里会变得非常臃肿。<br>作者利用<code>MVVM pattern</code>，加上一点<code>Protocol</code>技巧，来简化dataSource的工作，把UI和逻辑解耦合，并且最大化这个tableView模组的扩展性。</p>
<h2 id="音视频"><a href="#音视频" class="headerlink" title="音视频"></a>音视频</h2><p>临近年关，可能很多人会考虑年后换工作的情况，最近几期的ggtalk也在讨论跳槽这个大家比较关注的话题，希望大家收听之后能够有所收获：<br><a href="https://talk.swift.gg/12" target="_blank" rel="noopener">狭义跳槽论：面试官，大厂新人和准备起跳的某 C</a><br><a href="https://talk.swift.gg/13" target="_blank" rel="noopener">广义跳槽论：简洁明了的方法论</a><br>附带之前的几期关于升职加薪的节目：<br><a href="https://talk.swift.gg/0" target="_blank" rel="noopener">聊聊程序员的升职加薪（上）</a><br><a href="https://talk.swift.gg/4" target="_blank" rel="noopener">聊聊程序员的升职加薪（下）</a></p>
<h3 id="程序员的春节趣事"><a href="#程序员的春节趣事" class="headerlink" title="程序员的春节趣事"></a><a href="https://talk.swift.gg/14" target="_blank" rel="noopener">程序员的春节趣事</a></h3><p>今天上班路上听了这期节目，全程非常的欢快。我是今天晚上回家的火车，那些相似的春节趣事我也马上要经历一次了，是需要提前准备下怎么应对了🙃。</p>
<p>以下是官方内容介绍：<br>快过年了，估计大家也没心情工作学习，准备进入放假状态。严肃的话题放到年后，这期我们请到了袁滚滚、张思琦和老朋友莲叔，围绕着春节轻松愉快的聊一期。</p>
<h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><p>本篇GitHub模块，介绍几个Git和GitHub相关的项目。</p>
<h3 id="Git中文教程"><a href="#Git中文教程" class="headerlink" title="Git中文教程"></a><a href="https://github.com/geeeeeeeeek/git-recipes" target="_blank" rel="noopener">Git中文教程</a></h3><p>来自<a href="https://github.com/geeeeeeeeek" target="_blank" rel="noopener">geeeeeeeeek</a>的高质量Git中文教程，在GitHub已经获得了1w+的start。对git操作还有疑问的同学可以借助这份教程，完整的梳理一下git相关的知识，或者扫一下git盲区。 </p>
<h3 id="Git的奇技淫巧"><a href="#Git的奇技淫巧" class="headerlink" title="Git的奇技淫巧"></a><a href="https://github.com/521xueweihan/git-tips" target="_blank" rel="noopener">Git的奇技淫巧</a></h3><p>我们在使用git的时候，有时候会被一些具体的问题难住，这篇文章从具体操作入手，介绍一些我们知道但不一定都用过的git指令。<br>等等，我也想写一份我自己的Git奇淫技巧了，因为git这个东西是真的庞大。</p>
<h3 id="HelloGitHub"><a href="#HelloGitHub" class="headerlink" title="HelloGitHub"></a><a href="https://github.com/521xueweihan/HelloGitHub" target="_blank" rel="noopener">HelloGitHub</a></h3><p>这是一个面向编程新手、热爱编程、对开源社区感兴趣人群的项目，内容以月刊的形式更新发布。内容包括：流行项目、入门级项目、让生活变得更美好的工具、书籍、学习心得笔记、企业级项目等，这些开源项目大多都是非常容易上手、很 Cool，能够让你用很短时间感受到编程的魅力和便捷。从而让大家感受到编程的乐趣，动手开始编程。</p>
<h3 id="GitHub漫游指南"><a href="#GitHub漫游指南" class="headerlink" title="GitHub漫游指南"></a><a href="https://github.com/phodal/github" target="_blank" rel="noopener">GitHub漫游指南</a></h3><p>介绍你可能在Github上遇到的所有问题，从如何起一个好名字到如何推广项目，GitHub用户分析，每一个环节都非常详细。无论你处于编程的哪个阶段，我认为你都能从这份指南中获取到灵感和帮助。</p>
<h3 id="README"><a href="#README" class="headerlink" title="README"></a><a href="https://github.com/guodongxiaren/README" target="_blank" rel="noopener">README</a></h3><p>该文件用来测试和展示书写README的各种markdown语法。GitHub的markdown语法在标准的markdown语法基础上做了扩充，称之为GitHub Flavored Markdown。简称GFM，GFM在GitHub上有广泛应用，除了README文件外，issues和wiki均支持markdown语法。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhangferry.github.io/2019/01/02/monthly_6/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhangferry">
      <meta itemprop="description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhangferry">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/02/monthly_6/" class="post-title-link" itemprop="url">iOS开发月报#6|201812</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-01-02 10:54:57" itemprop="dateCreated datePublished" datetime="2019-01-02T10:54:57+08:00">2019-01-02</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">4.9k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">4 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="大事件"><a href="#大事件" class="headerlink" title="大事件"></a>大事件</h2><p>这个月的大事件是高通与苹果之间的专利大战。高通分别在中国和德国对苹果公司提起专利诉讼，结果均胜。苹果将在中国禁售iPhoneX及之前的机型。在德国则是全面禁售。<br>加上新品手机的创新力度不够，导致苹果股票持续走低，四个月前，苹果还是首个突破万亿美元市值的上市公司，到现在股价已经下跌了 36%，市值只有 7160 亿美元，几个月内市值损失接近 3000 亿美元。<br><img src="https://upload-images.jianshu.io/upload_images/1059465-4e4811eeba166496.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="news.png"><br>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/01/02/monthly_6/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </p></div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhangferry.github.io/2019/01/01/2018-summary/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhangferry">
      <meta itemprop="description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhangferry">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/01/2018-summary/" class="post-title-link" itemprop="url">2018年总结</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-01-01 23:22:25" itemprop="dateCreated datePublished" datetime="2019-01-01T23:22:25+08:00">2019-01-01</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.6k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>写的有点晚了，因为一些事情耽搁，本来想干脆不写了。但有股力量不断催促着自己要写下来，于是就有了这篇文章。今年对我是意义重大的一年，从几个方面说吧，工作，生活和2019年的目标。</p>
</blockquote>
<h2 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h2><p><img src="https://user-gold-cdn.xitu.io/2019/1/6/16823bc1cd33e59c?w=1240&amp;h=827&amp;f=jpeg&amp;s=59357" alt="work.jpg"></p>
<p>3月底进了新公司，换工作主要原因是在之前的公司遇到了上升瓶颈，对当时的我来说一直待下去也无法看到清晰的未来。从新公司开始，今年变化了很多，也成长了不少。<br>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/01/01/2018-summary/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </p></div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhangferry.github.io/2018/12/01/monthly_5/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhangferry">
      <meta itemprop="description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhangferry">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/12/01/monthly_5/" class="post-title-link" itemprop="url">iOS开发月报#5|201811</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-01 21:28:47" itemprop="dateCreated datePublished" datetime="2018-12-01T21:28:47+08:00">2018-12-01</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">3.9k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">4 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="大事件"><a href="#大事件" class="headerlink" title="大事件"></a>大事件</h2><p>11月27号，苹果AppStore下架包括拼多多、搜狗地图、讯飞阅读和悦跑圈在内的共718个App。据称下架原因是触发了AppStroe审核指南的2.5.2条例，即使用了热更新技术。去年6月份，苹果层因热更新下架数万款App。<br><img src="https://upload-images.jianshu.io/upload_images/1059465-14aacc2395523d81.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="C6D6A56886BF8346FA56A046C2BEE023.jpg"><br>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2018/12/01/monthly_5/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </p></div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhangferry.github.io/2018/11/26/avplayer-supported-format/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhangferry">
      <meta itemprop="description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhangferry">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/11/26/avplayer-supported-format/" class="post-title-link" itemprop="url">AVPlayer支持的视频格式</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-11-26 16:27:50" itemprop="dateCreated datePublished" datetime="2018-11-26T16:27:50+08:00">2018-11-26</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">5k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">5 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>发现很多人对视频格式存在一些误解，之前写的一篇文章讲AVPlayer的支持格式也有一些问题，所以这里单独出一篇文章讲一下，希望大家能明白。</p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>一个在线视频能够播放，大致是经过了如下步骤：<br><img src="https://upload-images.jianshu.io/upload_images/1059465-d573ac8a2e21fb3b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="video_play_progress.png"></p>
<p>可以总结为：拉数据-&gt;解协议-&gt;解封装-&gt;音视频解码-&gt;音视频同步-&gt;播放。<br>下面就针对这几个概念一一做下解释：</p>
<h3 id="播放协议"><a href="#播放协议" class="headerlink" title="播放协议"></a>播放协议</h3><p>一般点播采用HTTP，而直播的话，大部分还是采用RTMP或者私有协议，原因是延时会比较小，RTMP本身也是为了直播设计的。常见的流媒体协议：</p>
<table>
<thead>
<tr>
<th>简写</th>
<th style="text-align:center">全称</th>
<th style="text-align:center">推出机构</th>
<th>目前使用领域</th>
</tr>
</thead>
<tbody>
<tr>
<td>HLS</td>
<td style="text-align:center">HTTP Live Streaming</td>
<td style="text-align:center">苹果</td>
<td>多应用于苹果</td>
</tr>
<tr>
<td>RTP</td>
<td style="text-align:center">实时传输协议</td>
<td style="text-align:center">IETF</td>
<td>范围较广</td>
</tr>
<tr>
<td>RTCP</td>
<td style="text-align:center">实时传输控制协议</td>
<td style="text-align:center">IETF</td>
<td>范围较广</td>
</tr>
<tr>
<td>RTSP</td>
<td style="text-align:center">实时串流协议</td>
<td style="text-align:center">RealNetworks等</td>
<td>范围较广</td>
</tr>
<tr>
<td>RTMP</td>
<td style="text-align:center">实时消息协议</td>
<td style="text-align:center">Adobe</td>
<td>较流行</td>
</tr>
<tr>
<td>MMS</td>
<td style="text-align:center">串流媒体协议</td>
<td style="text-align:center">Microsoft</td>
<td>范围较广</td>
</tr>
</tbody>
</table>
<p><strong>RTP/RTSP/RTCP的区别</strong></p>
<blockquote>
<p>RTSP发起/终结流媒体、RTP传输流媒体数据 、RTCP对RTP进行控制，同步。</p>
</blockquote>
<p><strong>HLS(Http Live Streaming)</strong><br>HLS是苹果推出，实现的基于HTTP的流媒体传输协议:<br>优点：<br>1、通过m3u8索引文件可实现针对当前浏览设备的智能选择播放源，<br>2、通过m3u8索引文件可实现添加备份索引文件，防止服务器崩溃视频播放失败<br>3、和http视频一样 不需要太多服务器额外配置<br>缺点：<br>1、并非真正实时视频，30s左右时间差<br>2、需要视频处理<br>3、因为需要请求索引文件（ts视频文件）请求次数相对较多，对服务器负载较大</p>
<h3 id="视频编码"><a href="#视频编码" class="headerlink" title="视频编码"></a>视频编码</h3><p>所谓视频编码方式就是指通过特定的压缩技术，将某个视频格式的文件转换成另一种视频格式文件的方式。它是一种为了减少视频体积，同时保证画面质量的压缩技术，常见的视频编码有：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>推出机构</th>
<th>推出时间</th>
<th>目前使用领域</th>
</tr>
</thead>
<tbody>
<tr>
<td>HEVC(H.265)</td>
<td>MPEG/ITU-T</td>
<td>2013</td>
<td>研发中</td>
</tr>
<tr>
<td>H.264</td>
<td>MPEG/ITU-T</td>
<td>2003</td>
<td>各个领域</td>
</tr>
<tr>
<td>MPEG4</td>
<td>MPEG</td>
<td>2001</td>
<td>不温不火</td>
</tr>
<tr>
<td>MPEG2</td>
<td>MPEG</td>
<td>1994</td>
<td>数字电视</td>
</tr>
<tr>
<td>XviD</td>
<td>OpenDivX</td>
<td>2002</td>
<td>流行</td>
</tr>
<tr>
<td>VP9</td>
<td>Google</td>
<td>2013</td>
<td>研发中</td>
</tr>
<tr>
<td>VP8</td>
<td>Google</td>
<td>2008</td>
<td>不普及</td>
</tr>
<tr>
<td>VC-1</td>
<td>Microsoft Inc.</td>
<td>2006</td>
<td>微软</td>
</tr>
</tbody>
</table>
<p><strong>H.264</strong></p>
<p>H.264又叫AVC，是国际标准化组织（ISO）和国际电信联盟（ITU）共同提出的继MPEG4之后的新一代数字视频压缩格式，它集合了H.263和MPEG4的优点，拥有更高的数据压缩比。在同等的图像质量条件下，H.264的数据压缩比能比H.263高2倍，比MPEG-4高1.5倍。<br>也是目前苹果支持最好的编码格式。</p>
<h3 id="音频编码"><a href="#音频编码" class="headerlink" title="音频编码"></a>音频编码</h3><p>和视频编码类似，音频编码的作用是减少音频中的冗余，同时在保证一定音频质量的条件下作的压缩处理。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>推出机构</th>
<th style="text-align:center">推出时间</th>
<th style="text-align:center">目前使用领域</th>
</tr>
</thead>
<tbody>
<tr>
<td>AAC</td>
<td>MPEG</td>
<td style="text-align:center">1997</td>
<td style="text-align:center">流媒体</td>
</tr>
<tr>
<td>AC-3</td>
<td>Dolby Inc.</td>
<td style="text-align:center">1992</td>
<td style="text-align:center">DVD, 数字电视</td>
</tr>
<tr>
<td>MP3</td>
<td>MPEG</td>
<td style="text-align:center">1993</td>
<td style="text-align:center">各个领域（旧）</td>
</tr>
<tr>
<td>WMA</td>
<td>Microsoft Inc.</td>
<td style="text-align:center">1999</td>
<td style="text-align:center">Windows</td>
</tr>
</tbody>
</table>
<p><strong>AAC</strong><br>AAC（高级音频编码技术 Advanced Audio Coding)，出现于1997年，是基于MPEG-2的音频编码技术。由Fraunhofer IIS、杜比、苹果、AT&amp;T、索尼等公司共同开发，以取代mp3格式。2000年，MPEG-4标准出台，AAC从新整合了其特性，故现又称MPEG-4 AAC，即m4a。<br>苹果的CoreAudio对AAC有较好的支持。</p>
<h3 id="封装格式"><a href="#封装格式" class="headerlink" title="封装格式"></a>封装格式</h3><p>我们常见的视频格式MP4, AVI, RMVB, 3GP, MKV都是指视频的封装格式,大部分情况就是视频文件的后缀。常见的组合方式有：</p>
<style>
table th:nth-of-type(2) {
    width: 60%;
}
</style>

<table>
<thead>
<tr>
<th>名称</th>
<th style="text-align:left">简介</th>
<th>常用编码格式</th>
<th>扩展名</th>
</tr>
</thead>
<tbody>
<tr>
<td>Flash Video</td>
<td style="text-align:left">由Adobe Flash延伸出来的的一种流行网络视频封装格式。随着视频网站的丰富，这个格式已经非常普及。</td>
<td>H.264+MP3</td>
<td>flv</td>
</tr>
<tr>
<td>AVI（Audio Video Interleave）</td>
<td style="text-align:left">比较早的AVI是微软开发的。其含义是Audio Video Interactive，就是把视频和音频编码混合在一起存储。AVI也是最长寿的格式，已经存在10余年了，虽然发布过改版（V2.0于1996年发布），但已显老态。AVI格式上限制比较多，只能有一个视频轨道和一个音频轨道（现在有非标准插件可加入最多两个音频轨道），还可以有一些附加轨道，如文字等。AVI格式不提供任何控制功能。</td>
<td>Xvid+MP3</td>
<td>avi</td>
</tr>
<tr>
<td>WMV（Windows Media Video）</td>
<td style="text-align:left">同样是微软开发的一组数字视频编解码格式的通称，ASF（Advanced Systems Format）是其封装格式。ASF封装的WMV档具有“数字版权保护”功能。</td>
<td>VC-1+WMA</td>
<td>wmv/asf</td>
</tr>
<tr>
<td>MPEG（Moving Picture Experts Group）</td>
<td style="text-align:left">是一个国际标准化组织（ISO）认可的媒体封装形式，受到大部分机器的支持。其存储方式多样，可以适应不同的应用环境。MPEG-4档的档容器格式在Part 1（mux）、14（asp）、15（avc）等中规定。MPEG的控制功能丰富，可以有多个视频（即角度）、音轨、字幕（位图字幕）等等。MPEG的一个简化版本3GP还广泛的用于准3G手机上。</td>
<td>H.264+AAC,H263+AAC</td>
<td>dat(VCD),vob(DVD), mp4, 3gp</td>
</tr>
<tr>
<td>Matroska</td>
<td style="text-align:left">是一种新的多媒体封装格式，这个封装格式可把多种不同编码的视频及16条或以上不同格式的音频和语言不同的字幕封装到一个Matroska Media档内。它也是其中一种开放源代码的多媒体封装格式。Matroska同时还可以提供非常好的交互功能，而且比MPEG更方便、强大。</td>
<td>各种编码格式的组合</td>
<td>mkv</td>
</tr>
<tr>
<td>Real Video Real Media（RM）</td>
<td style="text-align:left">是由RealNetworks开发的一种档容器。它通常只能容纳Real Video和Real Audio编码的媒体。该档带有一定的交互功能，允许编写脚本以控制播放。RM，尤其是可变比特率的RMVB格式，没有复杂的Profile/Level，制作起来较H.264视频格式简单，非常受到网络上传者的欢迎。此外很多人仍有RMVB体积小高质量的错误认知，这个不太正确的观念也导致很多人倾向使用rmvb，事实上在相同码率下，rmvb编码和H.264这个高度压缩的视频编码相比，体积会较大。</td>
<td>RealVideo+RealAudio</td>
<td>rm/rmvb</td>
</tr>
<tr>
<td>QuickTime File Format</td>
<td style="text-align:left">是由苹果公司开发的容器。1998年2月11日，国际标准化组织（ISO）认可QuickTime文件格式作为MPEG-4标准的基础。QuickTime可存储的内容相当丰富，除了视频、音频以外还可支持图片、文字（文本字幕）等。</td>
<td>H.264+AAC</td>
<td>mov, qt</td>
</tr>
</tbody>
</table>
<p><strong>MP4</strong><br>mp4格式是H.264编码指定使用的标准封装格式，3GP是MP4格式的一种简化版本，减少了储存空间和较低的频宽需求，让手机上有限的储存空间可以使用。</p>
<p>实际上这些封装格式对应的音频视频编码格式也不是固定的，就拿MP4来说，常见的MP4是由H.264+AAC封装，但是也由Xvid+AAC编码的可能。如果解码器不支持Xvid，则可能会出现无法播放，或者播放播放过程有声音无画面的情况。</p>
<h2 id="苹果支持哪些音视频编码格式"><a href="#苹果支持哪些音视频编码格式" class="headerlink" title="苹果支持哪些音视频编码格式"></a>苹果支持哪些音视频编码格式</h2><p>我们可以在手机介绍界面，找到手机支持的视频格式<a href="https://www.apple.com/iphone/compare/" target="_blank" rel="noopener">iPhone - Compare Models - Apple</a></p>
<p>这里我们可以找到对应iPhone7支持的视频编码格式：<br><img src="https://upload-images.jianshu.io/upload_images/1059465-fa95df4f7ab02bf9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<blockquote>
<p>Video formats supported: HEVC, H.264, MPEG-4 Part 2, and Motion JPEG</p>
</blockquote>
<p><strong>HEVC</strong><br>又叫H.265，iOS11+A9芯片才开始对HEVC的支持，iPhone6s及以前的设备不支持HEVC解码。<br>音频格式用红框标出来了，内容较多，可自行对比。</p>
<h2 id="AVPlayer支持哪些视频格式"><a href="#AVPlayer支持哪些视频格式" class="headerlink" title="AVPlayer支持哪些视频格式"></a>AVPlayer支持哪些视频格式</h2><p>苹果设备支持音视频格式并不是就代表<code>AVPlayer</code>也支持那么多格式，确定<code>AVPlayer</code>的支持格式，我们可以查看<code>AVKit</code>中的一个API:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//展示当前支持的音视频格式</span></span><br><span class="line"><span class="keyword">let</span> asset = <span class="type">AVURLAsset</span>.audiovisualTypes()</span><br><span class="line"><span class="comment">//打印asset可以得到（已经转过展示格式）</span></span><br><span class="line">asset type (</span><br><span class="line">    <span class="string">"audio/aacp"</span>,</span><br><span class="line">    <span class="string">"video/3gpp2"</span>,</span><br><span class="line">    <span class="string">"audio/mpeg3"</span>,</span><br><span class="line">    <span class="string">"audio/mp3"</span>,</span><br><span class="line">    <span class="string">"audio/x-caf"</span>,</span><br><span class="line">    <span class="string">"audio/mpeg"</span>,</span><br><span class="line">    <span class="string">"video/quicktime"</span>,</span><br><span class="line">    <span class="string">"audio/x-mpeg3"</span>,</span><br><span class="line">    <span class="string">"video/mp4"</span>,</span><br><span class="line">    <span class="string">"audio/wav"</span>,</span><br><span class="line">    <span class="string">"video/avi"</span>,</span><br><span class="line">    <span class="string">"audio/scpls"</span>,</span><br><span class="line">    <span class="string">"audio/mp4"</span>,</span><br><span class="line">    <span class="string">"audio/x-mpg"</span>,</span><br><span class="line">    <span class="string">"video/x-m4v"</span>,</span><br><span class="line">    <span class="string">"audio/x-wav"</span>,</span><br><span class="line">    <span class="string">"audio/x-aiff"</span>,</span><br><span class="line">    <span class="string">"application/vnd.apple.mpegurl"</span>,</span><br><span class="line">    <span class="string">"video/3gpp"</span>,</span><br><span class="line">    <span class="string">"text/vtt"</span>,</span><br><span class="line">    <span class="string">"audio/x-mpeg"</span>,</span><br><span class="line">    <span class="string">"audio/wave"</span>,</span><br><span class="line">    <span class="string">"audio/x-m4r"</span>,</span><br><span class="line">    <span class="string">"audio/x-mp3"</span>,</span><br><span class="line">    <span class="string">"audio/AMR"</span>,</span><br><span class="line">    <span class="string">"audio/aiff"</span>,</span><br><span class="line">    <span class="string">"audio/3gpp2"</span>,</span><br><span class="line">    <span class="string">"audio/aac"</span>,</span><br><span class="line">    <span class="string">"audio/mpg"</span>,</span><br><span class="line">    <span class="string">"audio/mpegurl"</span>,</span><br><span class="line">    <span class="string">"audio/x-m4b"</span>,</span><br><span class="line">    <span class="string">"application/mp4"</span>,</span><br><span class="line">    <span class="string">"audio/x-m4p"</span>,</span><br><span class="line">    <span class="string">"audio/x-scpls"</span>,</span><br><span class="line">    <span class="string">"audio/x-mpegurl"</span>,</span><br><span class="line">    <span class="string">"audio/x-aac"</span>,</span><br><span class="line">    <span class="string">"audio/3gpp"</span>,</span><br><span class="line">    <span class="string">"audio/basic"</span>,</span><br><span class="line">    <span class="string">"audio/x-m4a"</span>,</span><br><span class="line">    <span class="string">"application/x-mpegurl"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>还有一个方式用来判断当前格式是否可播：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//An extended MIME type string such as video/3gpp2; codecs="mp4v.20.9, mp4a.E1" or audio/aac; codecs="mp4a.E1".</span></span><br><span class="line"><span class="keyword">let</span> playable: <span class="type">Bool</span> = <span class="type">AVURLAsset</span>.isPlayableExtendedMIMEType(<span class="string">"video/3gpp2; codecs=\"mp4v.20.9, mp4a.E1\""</span>)</span><br></pre></td></tr></table></figure>
<p>这里的MIMEType可以在这里找到<br><a href="https://developer.apple.com/library/archive/documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html" target="_blank" rel="noopener">System-Declared Uniform Type Identifiers</a></p>
<p><strong>总结</strong><br>由此我们可以下一个总结，AVPlayer支持的：<br>视频编码格式：<code>H.264</code>、<code>HEVC</code>(iPhone7及以后设备)、<code>MPEG-4</code>。<br>视频格式（封装格式）：.mp4、.mov、.m4v、.3gp、.avi等。<br>如果想支持更多的视频格式，可以使用使用第三方的框架，常用的视频编码和解码框架有<a href="https://www.videolan.org/vlc/" target="_blank" rel="noopener">VLC</a>和<a href="https://github.com/FFmpeg/FFmpeg" target="_blank" rel="noopener">ffmpeg</a>。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a href="https://zh.wikipedia.org/wiki/%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F" target="_blank" rel="noopener">视频文件格式 - 维基百科，自由的百科全书</a><br><a href="https://zh.wikipedia.org/wiki/%E9%9F%B3%E9%A2%91%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%AF%94%E8%BE%83" target="_blank" rel="noopener">音频编码格式的比较 - 维基百科，自由的百科全书</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhangferry.github.io/2018/10/31/monthly_4/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhangferry">
      <meta itemprop="description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhangferry">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/31/monthly_4/" class="post-title-link" itemprop="url">iOS开发月报#4|201810</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-31 16:00:50" itemprop="dateCreated datePublished" datetime="2018-10-31T16:00:50+08:00">2018-10-31</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">4.6k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">4 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>记录本月开发遇到的知识点，小tips，和bug总结。</p>
<h2 id="大事件"><a href="#大事件" class="headerlink" title="大事件"></a>大事件</h2><p>新版iPad Pro、MacBook Air、Mac mini发布，全线涨价，但是真香。。。<br><img src="https://upload-images.jianshu.io/upload_images/1059465-d64ed4ef11a3ee86.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2018/10/31/monthly_4/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </p></div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhangferry.github.io/2018/09/30/monthly_3/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhangferry">
      <meta itemprop="description" content="只有频率相同的人，才能看见彼此内心深处不为人知的优雅。">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhangferry">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/30/monthly_3/" class="post-title-link" itemprop="url">iOS开发月报#3|201809</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-30 18:48:02" itemprop="dateCreated datePublished" datetime="2018-09-30T18:48:02+08:00">2018-09-30</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">3.7k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">3 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><img src="https://upload-images.jianshu.io/upload_images/1059465-2711b521a2b371fc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="iPhoneX R"><br>新机发布，你中意XS Max还是XR？<br>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2018/09/30/monthly_3/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </p></div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="zhangferry">
            
              <p class="site-author-name" itemprop="name">zhangferry</p>
              <p class="site-description motion-element" itemprop="description">只有频率相同的人，才能看见彼此内心深处不为人知的优雅。</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">31</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/zhangferry" title="GitHub &rarr; https://github.com/zhangferry" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://weibo.com/2947186387/profile" title="Weibo &rarr; https://weibo.com/2947186387/profile" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhangferry</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">134k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">2:02</span>
  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=6.7.0"></script>




  

  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  



  





  

  

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function(i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap');
      $(e).after($wrap);
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
        var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
          return $(e).text();
        }).toArray().join('\n');
        var ta = document.createElement('textarea');
        var range = document.createRange(); //For Chrome
        var sel = window.getSelection(); //For Chrome
        var yPosition = window.pageYOffset || document.documentElement.scrollTop;
        ta.style.top = yPosition + 'px'; //Prevent page scroll
        ta.style.position = 'absolute';
        ta.style.opacity = '0';
        ta.value = code;
        ta.textContent = code; //For FireFox
        ta.contentEditable = true;
        ta.readOnly = false;
        document.body.appendChild(ta);
        range.selectNode(ta);
        sel.removeAllRanges();
        sel.addRange(range);
        ta.setSelectionRange(0, code.length);
        var result = document.execCommand('copy');
        
          if (result) $(this).text('复制成功');
          else $(this).text('复制失败');
        
        ta.blur(); //For iOS
        $(this).blur();
      })).on('mouseleave', function(e) {
        var $b = $(this).find('.copy-btn');
        setTimeout(function() {
          $b.text('复制');
        }, 300);
      }).append(e);
    })
  </script>


  

</body>
</html>
